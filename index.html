<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">

<link href="css/nv.d3.css" rel="stylesheet" type="text/css">
<link href="css/bootstrap.css" rel="stylesheet" media="screen">
<link href="css/sequences.css" rel="stylesheet" media="screen">
<style>

body {
  overflow-y:scroll;
}

text {
  font: 12px sans-serif;
}

#chart1 {
  margin: 10px;
  min-width: 100px;
  min-height: 100px;
/*
  Minimum height and width is a good idea to prevent negative SVG dimensions...
  For example width should be =< margin.left + margin.right + 1,
  of course 1 pixel for the entire chart would not be very useful, BUT should not have errors
*/
}

#chart1 svg {
  height: 500px;
}

</style>
<head>
	<title>Team DataWiz: Number of visitors of Singapore</title>
</head>
<body>
	<div class="navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Team DataWiz</a>
         <!-- <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div> 
      </div>
    </div>
	<div class="container-fluid carousel">
			
		<div id="myCarousel" class="carousel slide">
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
			</ol>
			<!-- Carousel items -->
			<div class="carousel-inner">
				<div class="active item">
					<h3>&nbsp;&nbsp;&nbsp;&nbsp;Total number of visitors 2009 - 2013</h3>
					 <!--<div class="offset1">The diagram shows the total number of visitors over the year</div> -->				
					<div class="row">
						<div class="span8">
							<div class="row">
								<div class="span9 offset1">
									<h4>Number of Singapore visitors over 5 years (2009-2013), top 10</h4>
								</div>
								<div class="span9">
								  <div id="chart1" class='with-3d-shadow with-transitions'>
									<svg></svg>
								  </div>
								</div>
								<div class="span9">
									<p align="center" style="margin-top:-30px;">Visitors</p>
								</div>
						  </div>
						</div>
						<div class="span8">
						<div class="row">
							<!--<h4>&nbsp;&nbsp;&nbsp;&nbsp;Expenditure in Singapore over 5 years</h4>	-->
							<div class="span9 offset1">
									<h4>Expenditure of Singapore visitors over 5 years (2009-2013), top 10</h4>
								</div>
							<div class="span8">
								<div id="expenditureLineChart" >
									<svg style="height: 500px;"></svg>
								</div>
							</div>
						</div>
					</div>
					</div>
					<div class="row">
						<div class="span14 offset1">				
								<img src="img/australia.png" style="width: 100px;height:75px;" id="aus" alt="Australia" class="img-polaroid flag">
								<img src="img/china.png" style="width: 100px;height:75px;" id="chi" alt="China" class="img-polaroid flag">
								<img src="img/india.jpg" style="width: 100px;height:75px;" id="ind" alt="India" class="img-polaroid flag">
								<img src="img/indonesia.png" style="width: 100px;height:75px;" id="indo" alt="Indonesia" class="img-polaroid flag">
								<img src="img/japan.png" style="width: 100px;height:75px;" id="jp" alt="Japan" class="img-polaroid flag">
								<img src="img/malaysia.png" style="width: 100px;height:75px;" id="my" alt="Malaysia" class="img-polaroid flag">
								<img src="img/philippines.png" style="width: 100px;height:75px;" id="ph" alt="Philippines" class="img-polaroid flag">
								<img src="img/thailand.png" style="width: 100px;height:75px;" id="th" alt="Thailand" class="img-polaroid flag">
								<img src="img/UK.png" style="width: 100px;height:75px;" id="uk" alt="UK" class="img-polaroid flag">
								<img src="img/USA.png" style="width: 100px;height:75px;" id="usa" alt="USA" class="img-polaroid flag">	
					</div>
					</div>
					<div class="row">
						<div class="offset1"><div id="pieDescOverview" style="visibility:visible"><h3 id="transportationMode">10 countries visitor mode of transport summary over 5 years (2009 - 2013)</h3></div></div>
						<div class="span14 offset1">
						<!--	<div id="pieDesc" style="visibility:hidden"><h3 id="transportationMode"><span id="countryName"></span> visitor mode of transport over 5 years (2009 - 2013)</h3></div> -->
							<div class="row">
								<div class="span2">
									<svg id="transportationModePie1" class="mypiechart" style="height: 180px; width: 200px;"></svg>	
									<p align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2009</p>
								</div>
								<div class="span2 offset1">
									<svg id="transportationModePie2" class="mypiechart" style="height: 180px; width: 200px;"></svg>
									<p align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2010</p>
								</div>
								<div class="span2 offset1">
									<svg id="transportationModePie3" class="mypiechart" style="height: 180px; width: 200px;"></svg>
									<p align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2011</p>
								</div>
								<div class="span2 offset1">
									<svg id="transportationModePie4" class="mypiechart" style="height: 180px; width: 200px;"></svg>
									<p align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2012</p>
								</div>
								<div class="span2 offset1">
									<svg id="transportationModePie5" class="mypiechart" style="height: 180px; width: 200px;"></svg>
									<p align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2013</p>
								</div>
							</div>
							
						</div>
					</div>
				</div>
				<div class="item">
					<h3>&nbsp;&nbsp;&nbsp;&nbsp;Expenditure Breakdown of each country visitor in Singapore</h3>
				<div class="row">
					
					
					<br />
					<!--<div class="span12"><h4>&nbsp;&nbsp;&nbsp;&nbsp;Please select the country to check their expenditure breakdown:</h4></div> -->
					
				</div>
				
				<br />
				<br />
					<!--sun burst -->
				<div class="container">
					<div class ="row">
						<div class="span10">
						  <div id="sequence"></div>
						  <div id="chartExpenditureBD">
						  
							<!--<div id="explanation" style="visibility: hidden;">
							  <span id="percentage"></span><br/>
							  of visits begin with this sequence of pages
							</div>-->
						  </div>
						</div>
						<div class="span2">
						  <!--<input type="checkbox" id="togglelegend"> Legend<br/>-->
						  <div id="legend" style=""></div>
						</div>
					</div>
					</div>
				</div>
			</div>
			<!-- Carousel nav -->
			<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
			<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
		</div>
	</div>
		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/bootstrap-transition.js"></script>
<script src="js/bootstrap-alert.js"></script>
<script src="js/bootstrap-modal.js"></script>
<script src="js/bootstrap-dropdown.js"></script>
<script src="js/bootstrap-scrollspy.js"></script>
<script src="js/bootstrap-tab.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/bootstrap-popover.js"></script>
<script src="js/bootstrap-button.js"></script>
<script src="js/bootstrap-collapse.js"></script>
<script src="js/bootstrap-carousel.js"></script>
<script src="js/bootstrap-typeahead.js"></script>
<script src="js/d3.v3.js"></script>
<script src="js/nv.d3.js"></script>
<script src="js/utils.js"></script>
<script src="js/tooltip.js"></script>
<script src="js/legend.js"></script>
<script src="js/axis.js"></script>
<script src="js/multiBarHorizontal.js"></script>
<script src="js/multiBarHorizontalChart.js"></script>
<script src="js/pie.js"></script>
<script src="js/pieChart.js"></script>
<script src="js/stream_layers.js"></script>
<script src="js/record.js"></script>
<script src="js/interactiveLayer.js"></script>
<script src="js/scatter.js"></script>
<script src="js/line.js"></script>
<script src="js/lineChart.js"></script>
<script src="js/sequences.js"></script>
<script>


$(document).ready(function(){
	$('.carousel').carousel('pause');
});

var chart;
nv.addGraph(function() {
  chart = nv.models.multiBarHorizontalChart()
      .x(function(d) { return d.label })
      .y(function(d) { return d.value })
      .margin({ bottom: 50, right:50})
      .showValues(true)
      //.tooltips(false)
      //.barColor(d3.scale.category20().range())
      .transitionDuration(250)
      .stacked(true)
      .showControls(false);

  chart.yAxis
      .tickFormat(d3.format(',.2f'));
  
  chart.xAxis
    .axisLabel("Visitors");
	
  d3.select('#chart1 svg')
      .datum(number_visitor_data)
      .call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  
  //click the bar to check the value inside it
  chart.multibar.dispatch.on("elementClick", function(e) {
    console.log(e.point.label);
	console.log(e.series.key);
	//alert(window[e.point.label+e.series.key]);
	$("#pieDescOverview").css('visibility','hidden');
	$("#pieDesc").css('visibility','visible');
	//$("#countryYear").html(e.point.label);
	$("#countryName").html(e.series.key);
	
   findCountryTransportation(e.series.key+e.point.label);
   
	
	//d3.select('#expenditureLineChart svg').call(chart2);
	//$('.carousel').carousel(1);
	//$('.carousel').carousel('pause');
  });
  
  return chart;
});

$("#change").on("click",function(){
	d3.select('#chart1 svg')
      .datum(long_short_data2)
      .call(chart);
});

$("#change2").on("click",function(){
	d3.select('#chart1 svg')
      .datum(number_visitor_data)
      .call(chart);
});

//pie chart generation js
var chart3;
nv.addGraph(function() {
    var width = 200,
        height = 200;

     chart3 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#transportationModePie1")
          .datum(pie2009)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart3);

    chart3.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart3;
});

var chart4;
nv.addGraph(function() {
    var width = 200,
        height = 200;

     chart4 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#transportationModePie2")
          .datum(pie2010)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart4);

    chart4.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart4;
});

var chart5;
nv.addGraph(function() {
    var width = 200,
        height = 200;

     chart5 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#transportationModePie3")
          .datum(pie2011)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart5);

    chart5.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart5;
});

var chart6;
nv.addGraph(function() {
    var width = 200,
        height = 200;

     chart6 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#transportationModePie4")
          .datum(pie2012)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart6);

    chart6.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart6;
});

var chart7;
nv.addGraph(function() {
    var width = 200,
        height = 200;

    var chart7 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#transportationModePie5")
          .datum(pie2013)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart7);

    chart7.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart7;
});


//line chart
var chart2;
nv.addGraph(function() {
  chart2 = nv.models.lineChart()
  //.useInteractiveGuideline(true)
   //.rightAlignYAxis(true)
   .margin({left: 100})
  .forceY([0,3000])
  .options({
	showXAxis: true,
    showYAxis: true,
    transitionDuration: 250
  })
  ;

  // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
  chart2.xAxis
    .axisLabel("Year (2009 - 2013)")
    .tickFormat(d3.format('d'));

  chart2.yAxis
    .axisLabel('Million (SGD)')
    .tickFormat(d3.format(',2f'))
    ;

  d3.select('#expenditureLineChart svg')
    .datum(expenditure)
    .call(chart2);

  //TODO: Figure out a good way to do this automatically
  nv.utils.windowResize(chart2.update);
  //nv.utils.windowResize(function() { d3.select('#expenditureLineChart svg').call(chart2) });

  chart2.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart2;
});


function findCountryTransportation(countryYear){
	nv.addGraph(function() {
    var width = 200,
        height = 200;

    chart3 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

    d3.select("#transportationModePie1")
          .datum(window[countryYear])
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart3);
	
	chart4 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

    d3.select("#transportationModePie2")
          .datum(window[countryYear])
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart4);

	chart5 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

    d3.select("#transportationModePie3")
          .datum(window[countryYear])
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart5);
	
	chart6 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

    d3.select("#transportationModePie4")
          .datum(window[countryYear])
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart6);
	
	chart7 = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

    d3.select("#transportationModePie5")
          .datum(window[countryYear])
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart7);



    //chart3.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

   // return chart3;
});
}



</script>
</html>